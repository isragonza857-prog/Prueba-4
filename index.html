<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BuzÃ³n de Amor ðŸ’Œ</title>
    <style>
        :root { --rosa: #ff4d6d; --fondo: #fff0f3; --texto: #590d22; }
        body { background-color: var(--fondo); font-family: sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; color: var(--texto); }
        h1 { margin: 20px 0; font-size: 1.6rem; text-align: center; }
        #contenedor { width: 100%; max-width: 400px; }
        .carta { background: white; padding: 20px; margin-bottom: 15px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-left: 8px solid var(--rosa); }
        .bloqueada { background: #eee; border-left-color: #adb5bd; opacity: 0.7; }
        .tag { display: block; font-size: 0.75rem; color: var(--rosa); font-weight: bold; margin-bottom: 5px; }
    </style>
</head>
<body>

    <h1>ðŸ’Œ Nuestro BuzÃ³n MÃ¡gico</h1>
    <div id="contenedor">Cargando tus mensajes...</div>

    <script>
        const frases = [
            { id: 1, texto: "Â¡Empieza nuestra semana! â¤ï¸", h: 0 },
            { id: 2, texto: "Eres lo mejor de mi dÃ­a ðŸ˜", h: 12 },
            { id: 3, texto: "Mensajito dÃ­a 2 ðŸŒ¹", h: 24 },
            { id: 4, texto: "Te amo muchÃ­simo ðŸ’‹", h: 36 },
            { id: 5, texto: "DÃ­a 3: Eres especial âœ¨", h: 48 },
            { id: 6, texto: "Tu sonrisa me encanta ðŸ’–", h: 60 },
            { id: 7, texto: "DÃ­a 4: Mitad de semana ðŸŒŽ", h: 72 },
            { id: 8, texto: "Gracias por estar aquÃ­ ðŸ¤—", h: 84 },
            { id: 9, texto: "DÃ­a 5: Â¡Casi viernes! ðŸŽ", h: 96 },
            { id: 10, texto: "Me encantas cada segundo ðŸ˜", h: 108 },
            { id: 11, texto: "DÃ­a 6: Mi corazÃ³n es tuyo ðŸ‘©â€â¤ï¸â€ðŸ‘¨", h: 120 },
            { id: 12, texto: "Eres mi lugar favorito ðŸ ", h: 132 },
            { id: 13, texto: "DÃ­a 7: Â¡Ãšltimo dÃ­a! ðŸ˜´", h: 144 },
            { id: 14, texto: "Â¡MaÃ±ana reiniciamos! âœ¨", h: 156 }
        ];

        function mostrar() {
            const cont = document.getElementById('contenedor');
            const ahora = Date.now();
            
            // Forzamos un inicio limpio con una nueva llave
            let inicio = localStorage.getItem('ID_RESCATE_TOTAL');
            if (!inicio) {
                inicio = ahora;
                localStorage.setItem('ID_RESCATE_TOTAL', inicio);
            }

            // Si ya pasaron los 7 dÃ­as (168h), reiniciamos
            if ((ahora - parseInt(inicio)) > (168 * 3600000)) {
                inicio = ahora;
                localStorage.setItem('ID_RESCATE_TOTAL', inicio);
            }
            
            let html = '';
            frases.forEach(f => {
                const desc = parseInt(inicio) + (f.h * 3600000);
                if (ahora >= desc) {
                    html += `<div class="carta"><span class="tag">âœ¨ DESBLOQUEADO</span><p>${f.texto}</p></div>`;
                } else {
                    const r = desc - ahora;
                    const d = Math.floor(r / 86400000);
                    const hr = Math.floor((r % 86400000) / 3600000);
                    const m = Math.floor((r % 3600000) / 60000);
                    html += `<div class="carta bloqueada"><span class="tag">ðŸ”’ Disponible en: ${d}d ${hr}h ${m}m</span><p><i>Mensaje sorpresa...</i></p></div>`;
                }
            });
            cont.innerHTML = html;
        }

        // Ejecutar de inmediato y luego cada minuto
        mostrar();
        setInterval(mostrar, 60000);
    </script>
</body>
</html>
